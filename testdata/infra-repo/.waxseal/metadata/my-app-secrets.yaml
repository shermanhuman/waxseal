shortName: my-app-secrets
manifestPath: apps/my-app/sealed-secret.yaml
sealedSecret:
  name: my-app-secrets
  namespace: my-app
  scope: strict
  type: Opaque
status: active
keys:
  - keyName: database_password
    source:
      kind: gsm
    gsm:
      secretResource: projects/waxseal-test-project/secrets/my-app-database-password
      version: "3"
    rotation:
      mode: generated
      generator:
        kind: randomBase64
        bytes: 32
  - keyName: api_key
    source:
      kind: gsm
    gsm:
      secretResource: projects/waxseal-test-project/secrets/my-app-api-key
      version: "1"
    rotation:
      mode: external
    expiry:
      expiresAt: "2026-06-15T00:00:00Z"
      source: vendor
  - keyName: DATABASE_URL
    source:
      kind: computed
    computed:
      kind: template
      template: "postgresql://{{username}}:{{password}}@{{host}}:{{port}}/{{db}}?sslmode={{sslmode}}"
      inputs:
        - var: username
          ref:
            keyName: database_username
        - var: password
          ref:
            keyName: database_password
      params:
        host: "db.my-app.svc.cluster.local"
        port: "5432"
        db: "myapp"
        sslmode: "require"
  - keyName: database_username
    source:
      kind: gsm
    gsm:
      secretResource: projects/waxseal-test-project/secrets/my-app-database-username
      version: "1"
    rotation:
      mode: manual
